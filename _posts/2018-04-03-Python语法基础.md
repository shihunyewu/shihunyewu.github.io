---
layout:     post
title:      "Python核心编程笔记"
subtitle:   " \"Python-Basic\""
date:       2018-04-03 11:11:11
author:     "shihunyewu"
header-img: "img/post-bg-unix-linux.jpg"
catalog: false
tags:
    - Python
---

> 我以前只系统地看过Python的菜鸟教程，而菜鸟教程中只介绍了最基本的语法知识
> 在实际用Python的时候发现自己掌握的语法知识远远不够，现在开始看 Python 核心编程（第二版），希望对Python有个更深入的理解。

### 第二章

##### 乘方操作符
	```python
	2 ** 3 = 8
	```
##### for循环遍历  

发现有的人喜欢在遍历列表的时候，不仅遍历列表的元素，同时还得到相应的索引，这时就可以使用 enumerate函数

	```python
	for i,ch in enumerate(foo):
		print ch,'(%d)'%i
	```
	结果：
	```python
	a(0)
	b(1)
	c(2)
	```
##### 错误和异常

```
try:
	fielname = 'test.txt'
	fobj = open(filename,'r')
	fobj.close()
except IOError,e:
	print 'file open error',e
```

##### 函数的默认参数

```
def foo(debug = True):
	if debug:
		print 'Hello World'
	print 'done'
```

### 第三章

##### 同一行书写多个语句

```python
import sys; x = 'foo' ;
```

##### 增量赋值

但是不支持 x++ 或 ++x 这种前置/后置 自增/自减 运算符

```
x += 1
```

##### 多重赋值

```python
x = y = z = 1 # 结果就是 x = 1，y = 1，z = 1
```

##### 多元赋值

```python
x,y,z = 1,2,'string'
x,y = y,x # 方便地交换变量值
```

##### 缩进

缩进的上下边界为 3 个空格 和 7 个空格

##### 模块结构和布局

每个 python 脚本文档应该有清晰的结构，推荐结构如下：
1. 起始行，通常只在类 Unix 环境下使用，有起始行就能够仅输入脚本名字来执行脚本，无需直接调用解释器。
2. 模块文档，介绍模块的功能和重要全局变量的含义，模块外可以通过 module.__doc__ 来访问，使用 help() 查阅模块功能的时候，也是显示的这些内容。
	```python
	"this is a test module"
	```
3. 模块导入语句
4. 变量定义
5. 类定义语句，类功能描述和模块功能描述相似，通过 class.__doc__ 访问
6. 函数定义语句，函数功能描述和模块功能描述相似，通过 function.__doc__ 访问
7. 主程序

##### __name__ == '__main__'

一般在每个模块文件的主程序位置都要加这样一个判断，表示只有该文件作为主程序运行时才会执行以下代码，否则作为模块导入文件的时候是不会执行的。

我们完成了每个模块之后可以在这个位置书写模块的测试代码。

##### 垃圾收集

python 和 java 类似，也是全权负责内存的管理，其中垃圾内存管理，使用变量的引用计数来作为指标，引用次数不大于 0，那么就将变量所占内存回收。
* 增加引用计数
```
x = 3.14
y = x # x 的引用次数加 1
```
* 减少引用次数
	* 本地引用离开了作用范围
	* 对象的一个别名被赋值给其他对象
	* 对象被从一个窗口中移除  
		```python
		myList.remove(x)
		```
	* 窗口对象被删除
		```python
		del myList # myList中的子元素跟着被删除
		```
	* 对象被显式地删除  
		```python
		del x
		```
* 循环引用：使用循环垃圾收集器

```python
x = 123
y = x
x = y # x 和 y 发生了循环引用，x 和 y 的引用次数无论如何最少为 1
```

##### 为什么 Pyhthon 中不需要声明函数类型？

？？？


### 第四章 Python 对象

##### 字符串比较

按照序列值，其实也就是 ASCII 值比较

##### is 和 == 的区别

实际上 a is b 操作等价于 id(a) == id(b)
```python
a = 1
b = 1.0 
a == b # True
a is b # False
```

##### type() 和 isinstance()

type()函数返回任意Python对象的类型,isinstance() 函数判断该对象是何种类型，书上举了这样的例子来说明 type() 和 isinstance()的用法。

```python
num = -69
if isinstance(num,(int,long,float,complex)):
	print type(num).__name__		# 输出 int
num = -5.2+1.9j
if isinstance(num,(int,long,float,complex)):
	print type(num).__name__		# 输出 complex
```
type() 和 isinatance()帮助编程者保证调用的就是期望的对象或函数。

##### 类型工厂函数

类似于 int()、type()、list()这些内置转换函数，调用这些函数的时候实际上是生成了该类的一个实例。
除了常见的之外，支持工厂函数的还有
```python
frozenset()
classmethod()
staticmethod(0
super()
property()
file()
```

##### 标准类型的分类

* 存储模型，分为容器类型（列表，元组等），原子模型（数值，字符串），主要区别就是是否可以包含多个值
* 更新模型，数值和字符串在被更新了之后，id(变量)的值会发生变化，即生成了一个新对象，而列表这种对象在被修改前后，id(变量)的值不变
* 访问模型，直接存取（非容器类型），顺序（列表），映射（字典）。

##### 不支持的类型

* char 或 byte，可以用长度为 1 的字符串来表示
* 指针，python中没有必要使用指针，可以通过id()得到类似于地址的值，但是无法修改
* int short long，Python中的整形实现相当于 c 语言中的长整型
* float vs double，python的浮点类型是 c 语言中的双精度浮点类型
